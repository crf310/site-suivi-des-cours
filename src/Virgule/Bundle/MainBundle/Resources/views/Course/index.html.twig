{% extends '::main_content.html.twig' %}
{% block content_title %}Planning des cours{% endblock %}
{%block submenu %}
    <a class="btn tip-bottom" href="{{ path('course_show_planning') }}"> <i class="icon-calendar"></i>Voir le planning</a>
    <a class="btn tip-bottom" href="{{ path('course_new') }}"> <i class="icon-add"></i>Nouveau cours</a>
{% endblock %}
{% block main_content %}
<div class="widget-box">
    <div class="widget-title">
            <span class="icon">
                    <i class="icon-th"></i>
            </span>
            <h5>Liste des cours de cette session</h5>
    </div>
    <div class="widget-content nopadding">
        <table class="table table-bordered data-table">
            <thead>
                <tr>
                    <th>Jour</th>
                    <th>Horaires</th>
                    <th>Niveau</th>
                    <th>Formateur</th>
                    <th>Salle</th>
                    <th>Etudiants inscrits</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
            {% for entity in entities %}
                <tr>
                    <td>{{ entity['dayOfWeek'] | day }}</td>
                    <td>{{ entity['startTime'] | date('H:i') }} - {{ entity['endTime'] | date('H:i') }}</td>
                    <td>{{ entity['classlevel'] }}</td>
                    <td>
                        {% for teacher in teachers_array[entity['course_id']] %}
                            <a href="{{ path('teacher_show', { 'id': teacher['teacher_id'] }) }}">{{ teacher['teacher_firstName'] }} {{ teacher['teacher_lastName'] }}</a>{% if teacher != loop.last %},&nbsp;{% endif %}
                        {% endfor %}
                    </td>
                    <td>{{ entity['classroom'] }}</td> 
                    <td class="center">{{ entity['nb_students'] }}</td>
                    <td>
                        <a href="{{ path('course_show', { 'id': entity['course_id'] }) }}">show</a>&nbsp;
                        <a href="{{ path('course_edit', { 'id': entity['course_id'] }) }}">edit</a>&nbsp;
                        <a href="{{ path('classsession_add', { 'course_id': entity['course_id'] }) }}">Enregistrer un compte-rendu</a>
                    </td>
                </tr>
            {% endfor %}
        </table>
    </div>
</div>
{% endblock %}